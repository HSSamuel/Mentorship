import{r as l,j as e,b as p,u as v,L as N}from"./index-zyrxu14e.js";const w=({onGoalCreated:d})=>{const[u,o]=l.useState(""),[c,t]=l.useState(""),[i,n]=l.useState(""),[x,h]=l.useState(""),[g,b]=l.useState(""),[s,r]=l.useState(""),[m,y]=l.useState(!1),f=async a=>{a.preventDefault(),y(!0);try{const j=await p.post("/goals",{title:u,specific:c,measurable:i,achievable:x,relevant:g,timeBound:s,category:"Skill Development"});d(j.data),o(""),t(""),n(""),h(""),b(""),r("")}catch(j){console.error("Failed to create goal:",j),alert("Could not create goal. Please try again.")}finally{y(!1)}};return e.jsxs("form",{onSubmit:f,className:"p-4 bg-white shadow-md rounded-lg space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700",children:"Goal Title"}),e.jsx("input",{id:"title",type:"text",value:u,onChange:a=>o(a.target.value),required:!0,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"specific",className:"block text-sm font-medium text-gray-700",children:"Specific"}),e.jsx("textarea",{id:"specific",value:c,onChange:a=>t(a.target.value),required:!0,rows:2,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",placeholder:"What exactly do I want to accomplish?"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"measurable",className:"block text-sm font-medium text-gray-700",children:"Measurable"}),e.jsx("textarea",{id:"measurable",value:i,onChange:a=>n(a.target.value),required:!0,rows:2,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",placeholder:"How will I track my progress?"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"achievable",className:"block text-sm font-medium text-gray-700",children:"Achievable"}),e.jsx("textarea",{id:"achievable",value:x,onChange:a=>h(a.target.value),required:!0,rows:2,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",placeholder:"Is this goal realistic?"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"relevant",className:"block text-sm font-medium text-gray-700",children:"Relevant"}),e.jsx("textarea",{id:"relevant",value:g,onChange:a=>b(a.target.value),required:!0,rows:2,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",placeholder:"Why is this goal important to me?"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"timeBound",className:"block text-sm font-medium text-gray-700",children:"Time-bound"}),e.jsx("textarea",{id:"timeBound",value:s,onChange:a=>r(a.target.value),required:!0,rows:2,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",placeholder:"What is the deadline?"})]}),e.jsx("button",{type:"submit",disabled:m,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 disabled:bg-gray-400",children:m?"Saving...":"Set Goal"})]})},k=({goals:d,onUpdate:u,onDelete:o})=>{const c=async(t,i)=>{try{const n=await p.put(`/goals/${t.id}`,{status:i});u(n.data)}catch(n){console.error("Failed to update goal status:",n)}};return d.length===0?e.jsx("p",{className:"text-center text-gray-500",children:"You haven't set any goals yet. Add one to get started!"}):e.jsx("div",{className:"space-y-4",children:d.map(t=>e.jsxs("div",{className:"p-4 bg-white shadow-md rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("h3",{className:"font-bold text-lg",children:t.title}),e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${t.status==="Completed"?"bg-green-200 text-green-800":"bg-yellow-200 text-yellow-800"}`,children:t.status})]}),e.jsxs("div",{className:"mt-4 space-y-2 text-sm text-gray-600",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Specific:"})," ",t.specific]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Measurable:"})," ",t.measurable]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Achievable:"})," ",t.achievable]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Relevant:"})," ",t.relevant]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Time-bound:"})," ",t.timeBound]})]}),e.jsxs("div",{className:"mt-4 flex gap-2",children:[e.jsx("button",{onClick:()=>c(t,"Completed"),className:"text-sm text-green-600",children:"Mark as Complete"}),e.jsx("button",{onClick:()=>c(t,"InProgress"),className:"text-sm text-yellow-600",children:"Mark as In Progress"}),e.jsx("button",{onClick:()=>o(t.id),className:"text-sm text-red-600",children:"Delete"})]})]},t.id))})},C=()=>{const{user:d}=v(),[u,o]=l.useState([]),[c,t]=l.useState(!0),[i,n]=l.useState(null),x=l.useCallback(async()=>{if(d?.role!=="MENTEE"){t(!1);return}try{t(!0),n(null);const s=await p.get("/goals");o(s.data)}catch(s){n("Failed to fetch your goals. Please try again later."),console.error(s)}finally{t(!1)}},[d]);l.useEffect(()=>{x()},[x]);const h=s=>{o(r=>[s,...r])},g=s=>{o(r=>r.map(m=>m.id===s.id?s:m))},b=s=>{o(r=>r.filter(m=>m.id!==s)),p.delete(`/goals/${s}`).catch(r=>{console.error("Failed to delete goal on server:",r),x()})};return c?e.jsx("p",{className:"text-center text-gray-500",children:"Loading..."}):d?.role==="MENTOR"?e.jsxs("div",{className:"text-center py-16 px-6 bg-white dark:bg-gray-800 rounded-lg shadow-md",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-800 dark:text-gray-100",children:"Viewing Your Mentees' Goals"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-2",children:"This page is for mentees to set their personal goals. You can view and manage the goals of your mentees from your dashboard."}),e.jsx(N,{to:"/my-mentors",className:"mt-4 inline-block px-6 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition-colors",children:"Go to My Mentees"})]}):e.jsxs("div",{className:"container mx-auto p-4 md:p-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white mb-6",children:"My S.M.A.R.T. Goals"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-1",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4 dark:text-gray-100",children:"Add a New Goal"}),e.jsx(w,{onGoalCreated:h})]}),e.jsxs("div",{className:"lg:col-span-2",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4 dark:text-gray-100",children:"Current Goals"}),i&&e.jsx("p",{className:"text-red-500",children:i}),!i&&e.jsx(k,{goals:u,onUpdate:g,onDelete:b})]})]})]})};export{C as default};
