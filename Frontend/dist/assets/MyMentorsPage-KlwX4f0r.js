import{r as o,j as e,b as g,L as b}from"./index-zyrxu14e.js";const j=({isOpen:i,onClose:d,onSave:l,goal:n})=>{const[x,c]=o.useState(""),[s,r]=o.useState("");if(o.useEffect(()=>{n?(c(n.title),r(n.description||"")):(c(""),r(""))},[n]),!i)return null;const m=u=>{u.preventDefault(),x&&l({title:x,description:s})};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",children:e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-2xl w-full max-w-lg m-4",children:[e.jsx("h3",{className:"text-2xl font-bold text-center text-gray-800 mb-6",children:n?"Edit Goal":"Add New Goal"}),e.jsxs("form",{onSubmit:m,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700",children:"Title"}),e.jsx("input",{type:"text",id:"title",value:x,onChange:u=>c(u.target.value),required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"Description (Optional)"}),e.jsx("textarea",{id:"description",value:s,onChange:u=>r(u.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",rows:4})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-4",children:[e.jsx("button",{type:"button",onClick:d,className:"px-6 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-6 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition-colors",children:n?"Save Changes":"Add Goal"})]})]})]})})},N=({mentorshipId:i})=>{const[d,l]=o.useState([]),[n,x]=o.useState(!0),[c,s]=o.useState(!1),[r,m]=o.useState(null),u=async()=>{x(!0);try{const t=await g.get(`/goals/${i}`);l(t.data)}catch(t){console.error("Failed to fetch goals:",t)}finally{x(!1)}};o.useEffect(()=>{i&&u()},[i]);const p=async t=>{try{if(r){const{data:a}=await g.put(`/goals/${r.id}`,t);l(d.map(h=>h.id===a.id?a:h)),toast.success("Goal updated!")}else{const{data:a}=await g.post("/goals",{...t,mentorshipRequestId:i});l([...d,a]),toast.success("Goal added!")}s(!1),m(null)}catch(a){console.error("Failed to save goal:",a),toast.error("Failed to save goal.")}},y=async t=>{try{const{data:a}=await g.put(`/goals/${t.id}`,{isCompleted:!t.isCompleted});l(d.map(h=>h.id===a.id?a:h))}catch(a){console.error("Failed to update goal status:",a)}},f=async t=>{if(window.confirm("Are you sure you want to delete this goal?"))try{await g.delete(`/goals/${t}`),l(d.filter(a=>a.id!==t)),toast.success("Goal deleted.")}catch(a){console.error("Failed to delete goal:",a),toast.error("Failed to delete goal.")}};return n?e.jsx("p",{className:"text-gray-500",children:"Loading goals..."}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-700",children:"Our Goals"}),e.jsx("button",{onClick:()=>{m(null),s(!0)},className:"px-4 py-2 text-sm font-medium text-white bg-green-600 rounded-lg hover:bg-green-700 transition-colors",children:"+ Add New Goal"})]}),e.jsx("div",{className:"space-y-3",children:d.length>0?d.map(t=>e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:t.isCompleted,onChange:()=>y(t),className:"h-5 w-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("p",{className:`ml-4 ${t.isCompleted?"line-through text-gray-400":"text-gray-800"}`,children:t.title})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>{m(t),s(!0)},className:"text-sm text-blue-500 hover:underline",children:"Edit"}),e.jsx("button",{onClick:()=>f(t.id),className:"text-sm text-red-500 hover:underline",children:"Delete"})]})]},t.id)):e.jsx("p",{className:"text-gray-500 text-center py-4",children:"No goals set yet. Add one to get started!"})}),c&&e.jsx(j,{isOpen:c,onClose:()=>{s(!1),m(null)},onSave:p,goal:r})]})},v=()=>{const[i,d]=o.useState([]),[l,n]=o.useState(null),[x,c]=o.useState(!0);return o.useEffect(()=>{(async()=>{c(!0);try{const r=await g.get("/mentorships/active");d(r.data),r.data.length>0&&n(r.data[0])}catch(r){console.error("Failed to fetch matches:",r)}finally{c(!1)}})()},[]),x?e.jsx("p",{className:"text-center text-gray-500",children:"Loading your mentors..."}):e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-6",children:"My Mentors"}),i.length>0?e.jsxs("div",{className:"flex flex-col md:flex-row gap-8",children:[e.jsx("aside",{className:"w-full md:w-1/3 lg:w-1/4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md",children:e.jsx("ul",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:i.map(s=>e.jsx("li",{children:e.jsxs("button",{onClick:()=>n(s),className:`w-full text-left p-4 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors ${l?.id===s.id?"bg-blue-50 dark:bg-blue-900/50":""}`,children:[e.jsx("p",{className:`font-semibold ${l?.id===s.id?"text-blue-600 dark:text-blue-400":"text-gray-800 dark:text-gray-100"}`,children:s.mentor.profile.name}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Matched on"," ",new Date(s.updatedAt).toLocaleDateString()]})]})},s.id))})})}),e.jsx("main",{className:"flex-1",children:l?e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md",children:[e.jsxs("div",{className:"flex justify-between items-center pb-4 border-b border-gray-200 dark:border-gray-700 mb-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100",children:l.mentor.profile.name}),e.jsx(b,{to:`/book-session/${l.mentor.id}`,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition-colors",children:"Book a Session"})]}),e.jsx(N,{mentorshipId:l.id})]}):e.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400",children:"Select a mentor to see details."})})]}):e.jsxs("div",{className:"text-center py-16 px-6 bg-white dark:bg-gray-800 rounded-lg shadow-md",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-800 dark:text-gray-100",children:"No Active Mentors"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-2",children:"You have no active mentorships. Find a mentor to get started!"}),e.jsx(b,{to:"/mentors",className:"mt-4 inline-block px-6 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition-colors",children:"Find a Mentor"})]})]})};export{v as default};
