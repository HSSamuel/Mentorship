import{r as l,j as e,c as j,u as w,L as k}from"./index-D8cSyDI9.js";const C=()=>e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),S=({onGoalCreated:i})=>{const[x,o]=l.useState(""),[u,t]=l.useState(""),[h,n]=l.useState(""),[m,p]=l.useState(""),[g,y]=l.useState(""),[v,f]=l.useState(""),[s,r]=l.useState(!1),c=async a=>{a.preventDefault(),r(!0);try{const N=await j.post("/goals",{title:x,specific:u,measurable:h,achievable:m,relevant:g,timeBound:v,category:"Skill Development"});i(N.data),o(""),t(""),n(""),p(""),y(""),f("")}catch(N){console.error("Failed to create goal:",N),alert("Could not create goal. Please try again.")}finally{r(!1)}},d="mt-1 block w-full border-gray-300 dark:border-gray-600 rounded-md shadow-sm bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-gray-200 focus:ring-blue-500 focus:border-blue-500",b="block text-sm font-medium text-gray-700 dark:text-gray-300";return e.jsxs("form",{onSubmit:c,className:"p-4 bg-white dark:bg-gray-800 shadow-md rounded-lg space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"title",className:b,children:"Goal Title"}),e.jsx("input",{id:"title",type:"text",value:x,onChange:a=>o(a.target.value),required:!0,className:d})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"specific",className:b,children:"Specific"}),e.jsx("textarea",{id:"specific",value:u,onChange:a=>t(a.target.value),required:!0,rows:2,className:d,placeholder:"What exactly do I want to accomplish?"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"measurable",className:b,children:"Measurable"}),e.jsx("textarea",{id:"measurable",value:h,onChange:a=>n(a.target.value),required:!0,rows:2,className:d,placeholder:"How will I track my progress?"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"achievable",className:b,children:"Achievable"}),e.jsx("textarea",{id:"achievable",value:m,onChange:a=>p(a.target.value),required:!0,rows:2,className:d,placeholder:"Is this goal realistic?"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"relevant",className:b,children:"Relevant"}),e.jsx("textarea",{id:"relevant",value:g,onChange:a=>y(a.target.value),required:!0,rows:2,className:d,placeholder:"Why is this goal important to me?"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"timeBound",className:b,children:"Time-bound"}),e.jsx("textarea",{id:"timeBound",value:v,onChange:a=>f(a.target.value),required:!0,rows:2,className:d,placeholder:"What is the deadline?"})]}),e.jsx("button",{type:"submit",disabled:s,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 disabled:bg-blue-500 disabled:cursor-not-allowed flex justify-center items-center",children:s?e.jsx(C,{}):"Set Goal"})]})},G=({goals:i,onUpdate:x,onDelete:o})=>{const u=async(t,h)=>{try{const n=await j.put(`/goals/${t.id}`,{status:h});x(n.data)}catch(n){console.error("Failed to update goal status:",n)}};return i.length===0?e.jsx("p",{className:"text-center text-gray-500",children:"You haven't set any goals yet. Add one to get started!"}):e.jsx("div",{className:"space-y-4",children:i.map(t=>e.jsxs("div",{className:"p-4 bg-white shadow-md rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("h3",{className:"font-bold text-lg",children:t.title}),e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${t.status==="Completed"?"bg-green-200 text-green-800":"bg-yellow-200 text-yellow-800"}`,children:t.status})]}),e.jsxs("div",{className:"mt-4 space-y-2 text-sm text-gray-600",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Specific:"})," ",t.specific]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Measurable:"})," ",t.measurable]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Achievable:"})," ",t.achievable]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Relevant:"})," ",t.relevant]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Time-bound:"})," ",t.timeBound]})]}),e.jsxs("div",{className:"mt-4 flex gap-2",children:[e.jsx("button",{onClick:()=>u(t,"Completed"),className:"text-sm text-green-600",children:"Mark as Complete"}),e.jsx("button",{onClick:()=>u(t,"InProgress"),className:"text-sm text-yellow-600",children:"Mark as In Progress"}),e.jsx("button",{onClick:()=>o(t.id),className:"text-sm text-red-600",children:"Delete"})]})]},t.id))})},F=()=>{const{user:i}=w(),[x,o]=l.useState([]),[u,t]=l.useState([]),[h,n]=l.useState(!0),[m,p]=l.useState(null),g=l.useCallback(async()=>{if(i?.role!=="MENTEE"){n(!1);return}try{n(!0),p(null);const[s,r]=await Promise.all([j.get("/goals"),j.get("/requests/sent")]);o(s.data);const c=r.data.filter(d=>d.status==="ACCEPTED");t(c)}catch(s){p("Failed to fetch your data. Please try again later."),console.error(s)}finally{n(!1)}},[i]);l.useEffect(()=>{g()},[g]);const y=s=>{o(r=>[s,...r])},v=s=>{o(r=>r.map(c=>c.id===s.id?s:c))},f=s=>{o(r=>r.filter(c=>c.id!==s)),j.delete(`/goals/${s}`).catch(r=>{console.error("Failed to delete goal on server:",r),g()})};return h?e.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400",children:"Loading..."}):i?.role==="MENTOR"?e.jsxs("div",{className:"text-center py-16 px-6 bg-white dark:bg-gray-800 rounded-lg shadow-md",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-800 dark:text-gray-100",children:"Viewing Your Mentees' Goals"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-2",children:"This page is for mentees to set their personal goals. You can view and manage the goals of your mentees from your dashboard."}),e.jsx(k,{to:"/my-sessions",className:"mt-4 inline-block px-6 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition-colors",children:"Go to My Mentees"})]}):e.jsxs("div",{className:"container mx-auto p-4 md:p-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white mb-6",children:"My S.M.A.R.T. Goals"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-1",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4 dark:text-gray-100",children:"Add a New Goal"}),e.jsx(S,{onGoalCreated:y,mentorships:u})]}),e.jsxs("div",{className:"lg:col-span-2",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4 dark:text-gray-100",children:"Current Goals"}),m&&e.jsx("p",{className:"text-red-500",children:m}),!m&&e.jsx(G,{goals:x,onUpdate:v,onDelete:f})]})]})]})};export{F as default};
