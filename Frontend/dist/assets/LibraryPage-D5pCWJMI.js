import{h as m,u as $,r as o,c as l,V as v,j as e}from"./index-kKR_KBkN.js";import{S as N}from"./star-BK8Kjp4V.js";import{S as D}from"./search-D05ddwCM.js";import{T as _}from"./tag-Dbg32Ey6.js";import{V as I}from"./video-tYl5POJ1.js";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],u=m("book",A);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],M=m("mic",L);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=[["path",{d:"M4 11a9 9 0 0 1 9 9",key:"pv89mb"}],["path",{d:"M4 4a16 16 0 0 1 16 16",key:"k0647b"}],["circle",{cx:"5",cy:"19",r:"1",key:"bfqh0e"}]],q=m("rss",V);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]],E=m("youtube",B),j=()=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md animate-pulse",children:[e.jsx("div",{className:"w-full h-40 bg-gray-300 dark:bg-gray-700 rounded-t-lg"}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"h-4 bg-gray-300 dark:bg-gray-700 rounded w-1/4 mb-2"}),e.jsx("div",{className:"h-6 bg-gray-300 dark:bg-gray-700 rounded w-3/4 mb-4"}),e.jsx("div",{className:"h-4 bg-gray-300 dark:bg-gray-700 rounded w-full mb-2"}),e.jsx("div",{className:"h-4 bg-gray-300 dark:bg-gray-700 rounded w-5/6"})]})]}),F=({resource:t})=>{const g=()=>{switch(t.type){case"ARTICLE":return e.jsx(u,{size:16,className:"mr-2"});case"VIDEO":return e.jsx(I,{size:16,className:"mr-2"});case"PODCAST":return e.jsx(M,{size:16,className:"mr-2"});case"COURSE":return e.jsx(q,{size:16,className:"mr-2"});case"BOOK":return e.jsx(u,{size:16,className:"mr-2"});default:return e.jsx(_,{size:16,className:"mr-2"})}};return e.jsxs("a",{href:t.link,target:"_blank",rel:"noopener noreferrer",className:"block bg-white dark:bg-gray-800 rounded-lg shadow-md hover:shadow-xl transition-shadow duration-300 flex flex-col group",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:t.imageUrl||`https://source.unsplash.com/random/400x225?query=${t.tags[0]||"learning"}`,alt:t.title,className:"w-full h-40 object-cover rounded-t-lg"}),e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-20 group-hover:bg-opacity-40 transition-all duration-300"}),t.matchScore&&e.jsxs("div",{className:"absolute top-2 right-2 flex items-center bg-yellow-400 text-black text-xs font-bold px-2 py-1 rounded-full",children:[e.jsx(N,{size:12,className:"mr-1"})," Match"]})]}),e.jsxs("div",{className:"p-6 flex-grow flex flex-col",children:[e.jsxs("div",{className:"flex items-center text-sm font-semibold text-indigo-600 dark:text-indigo-400 mb-2",children:[g(),t.type]}),e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2 flex-grow",children:t.title}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:[t.description.substring(0,100),"..."]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:t.tags.slice(0,3).map(c=>e.jsx("span",{className:"bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-300 text-xs font-medium px-2.5 py-0.5 rounded-full",children:c},c))})]})]})},K=()=>{const{user:t}=$(),[g,c]=o.useState([]),[w,b]=o.useState([]),[S,y]=o.useState([]),[R,h]=o.useState(!0),[C,p]=o.useState(!1),[r,x]=o.useState("recommended"),[n,f]=o.useState(""),k=o.useCallback(async()=>{if(t){h(!0);try{const s=t.profile?.skills?.[0]||"career development";f(s);const[a,d,i]=await Promise.all([l.get("/resources/recommended"),l.get(`/discover/youtube?query=${encodeURIComponent(s)}`),l.get(`/discover/books?query=${encodeURIComponent(s)}`)]);c(a.data),b(d.data),y(i.data)}catch(s){console.error("Failed to fetch library data:",s),v.error("Could not load library content.")}finally{h(!1)}}},[t]);o.useEffect(()=>{k()},[k]);const z=async s=>{if(s.preventDefault(),!!n){p(!0);try{const[a,d]=await Promise.all([l.get(`/discover/youtube?query=${encodeURIComponent(n)}`),l.get(`/discover/books?query=${encodeURIComponent(n)}`)]);b(a.data),y(d.data)}catch{v.error("Failed to discover new resources.")}finally{p(!1)}}},T=()=>{if(R)return e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((d,i)=>e.jsx(j,{},i))});let s=[],a={title:"No Resources Found",subtitle:"Try a different search."};return r==="recommended"?(s=g,a={title:"No Recommendations Yet",subtitle:"Complete your profile to get personalized recommendations."}):r==="youtube"?(s=w,a={title:"No Videos Found",subtitle:"Try a different search term to discover new videos."}):r==="books"&&(s=S,a={title:"No Books Found",subtitle:"Try a different search term to discover new books."}),C?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((d,i)=>e.jsx(j,{},i))}):s.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(d=>e.jsx(F,{resource:d},d.id))}):e.jsxs("div",{className:"text-center py-16",children:[e.jsx("h3",{className:"text-xl font-semibold",children:a.title}),e.jsx("p",{className:"text-gray-500 mt-2",children:a.subtitle})]})};return e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("h1",{className:"text-4xl font-extrabold text-gray-900 dark:text-white mb-2",children:"Resource Library"}),e.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-400 mb-8",children:"Curated articles, videos, and tools to help you on your journey."}),e.jsxs("div",{className:"mb-8 p-2 bg-gray-100 dark:bg-gray-800 rounded-lg flex justify-center flex-wrap gap-2",children:[e.jsxs("button",{onClick:()=>x("recommended"),className:`px-4 py-2 text-sm font-medium rounded-md transition-colors ${r==="recommended"?"bg-indigo-600 text-white shadow":"text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:[e.jsx(N,{size:16,className:"inline-block mr-2"}),"Recommended For You"]}),e.jsxs("button",{onClick:()=>x("youtube"),className:`px-4 py-2 text-sm font-medium rounded-md transition-colors ${r==="youtube"?"bg-indigo-600 text-white shadow":"text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:[e.jsx(E,{size:16,className:"inline-block mr-2"}),"Discover Videos"]}),e.jsxs("button",{onClick:()=>x("books"),className:`px-4 py-2 text-sm font-medium rounded-md transition-colors ${r==="books"?"bg-indigo-600 text-white shadow":"text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:[e.jsx(u,{size:16,className:"inline-block mr-2"}),"Discover Books"]})]}),(r==="youtube"||r==="books")&&e.jsxs("form",{onSubmit:z,className:"mb-8 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg shadow-inner flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-grow",children:[e.jsx(D,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:`Search for ${r==="youtube"?"videos":"books"}...`,value:n,onChange:s=>f(s.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-200"})]}),e.jsx("button",{type:"submit",className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Search"})]}),T()]})};export{K as default};
