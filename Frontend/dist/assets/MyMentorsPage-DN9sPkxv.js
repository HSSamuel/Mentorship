import{r as l,j as e,c as g,V as b,L as p}from"./index-D8cSyDI9.js";const N=({isOpen:c,onClose:n,onSave:r,goal:o})=>{const[m,x]=l.useState(""),[s,d]=l.useState("");if(l.useEffect(()=>{o?(x(o.title),d(o.description||"")):(x(""),d(""))},[o]),!c)return null;const i=u=>{u.preventDefault(),m&&r({title:m,description:s})};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",children:e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-2xl w-full max-w-lg m-4",children:[e.jsx("h3",{className:"text-2xl font-bold text-center text-gray-800 mb-6",children:o?"Edit Goal":"Add New Goal"}),e.jsxs("form",{onSubmit:i,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700",children:"Title"}),e.jsx("input",{type:"text",id:"title",value:m,onChange:u=>x(u.target.value),required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"Description (Optional)"}),e.jsx("textarea",{id:"description",value:s,onChange:u=>d(u.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",rows:4})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-4",children:[e.jsx("button",{type:"button",onClick:n,className:"px-6 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-6 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition-colors",children:o?"Save Changes":"Add Goal"})]})]})]})})},w=({mentorshipId:c})=>{const[n,r]=l.useState([]),[o,m]=l.useState(!0),[x,s]=l.useState(!1),[d,i]=l.useState(null),u=async()=>{m(!0);try{const t=await g.get(`/goals/${c}`);r(t.data)}catch(t){console.error("Failed to fetch goals:",t)}finally{m(!1)}};l.useEffect(()=>{c&&u()},[c]);const y=async t=>{try{if(d){const{data:a}=await g.put(`/goals/${d.id}`,t);r(n.map(h=>h.id===a.id?a:h)),b.success("Goal updated!")}else{const{data:a}=await g.post("/goals",{...t,mentorshipRequestId:c});r([...n,a]),b.success("Goal added!")}s(!1),i(null)}catch(a){console.error("Failed to save goal:",a),b.error("Failed to save goal.")}},f=async t=>{try{const{data:a}=await g.put(`/goals/${t.id}`,{isCompleted:!t.isCompleted});r(n.map(h=>h.id===a.id?a:h))}catch(a){console.error("Failed to update goal status:",a)}},j=async t=>{if(window.confirm("Are you sure you want to delete this goal?"))try{await g.delete(`/goals/${t}`),r(n.filter(a=>a.id!==t)),b.success("Goal deleted.")}catch(a){console.error("Failed to delete goal:",a),b.error("Failed to delete goal.")}};return o?e.jsx("p",{className:"text-gray-500",children:"Loading goals..."}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-700 dark:text-gray-200",children:"Our Goals"}),e.jsx("button",{onClick:()=>{i(null),s(!0)},className:"px-4 py-2 text-sm font-medium text-white bg-green-600 rounded-lg hover:bg-green-700 transition-colors",children:"+ Add New Goal"})]}),e.jsx("div",{className:"space-y-3",children:n.length>0?n.map(t=>e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:t.isCompleted,onChange:()=>f(t),className:"h-5 w-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("p",{className:`ml-4 ${t.isCompleted?"line-through text-gray-400":"text-gray-800 dark:text-gray-100"}`,children:t.title})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>{i(t),s(!0)},className:"text-sm text-blue-500 hover:underline",children:"Edit"}),e.jsx("button",{onClick:()=>j(t.id),className:"text-sm text-red-500 hover:underline",children:"Delete"})]})]},t.id)):e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center py-4",children:"No goals set yet. Add one to get started!"})}),x&&e.jsx(N,{isOpen:x,onClose:()=>{s(!1),i(null)},onSave:y,goal:d})]})},k=()=>{const[c,n]=l.useState([]),[r,o]=l.useState(null),[m,x]=l.useState(!0);return l.useEffect(()=>{(async()=>{x(!0);try{const i=(await g.get("/requests/sent")).data.filter(u=>u.status==="ACCEPTED");n(i),i.length>0&&o(i[0])}catch(d){console.error("Failed to fetch matches:",d)}finally{x(!1)}})()},[]),m?e.jsx("p",{className:"text-center text-gray-500",children:"Loading your mentors..."}):e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-6",children:"My Mentors"}),c.length>0?e.jsxs("div",{className:"flex flex-col md:flex-row gap-8",children:[e.jsx("aside",{className:"w-full md:w-1/3 lg:w-1/4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md",children:e.jsx("ul",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:c.map(s=>e.jsx("li",{children:e.jsxs("button",{onClick:()=>o(s),className:`w-full text-left p-4 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors ${r?.id===s.id?"bg-blue-50 dark:bg-blue-900/50":""}`,children:[e.jsx("p",{className:`font-semibold ${r?.id===s.id?"text-blue-600 dark:text-blue-400":"text-gray-800 dark:text-gray-100"}`,children:s.mentor.profile.name}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Matched on"," ",new Date(s.updatedAt).toLocaleDateString()]})]})},s.id))})})}),e.jsx("main",{className:"flex-1",children:r?e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md",children:[e.jsxs("div",{className:"flex justify-between items-center pb-4 border-b border-gray-200 dark:border-gray-700 mb-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100",children:r.mentor.profile.name}),e.jsx(p,{to:`/book-session/${r.mentor.id}`,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition-colors",children:"Book a Session"})]}),e.jsx(w,{mentorshipId:r.id})]}):e.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400",children:"Select a mentor to see details."})})]}):e.jsxs("div",{className:"text-center py-16 px-6 bg-white dark:bg-gray-800 rounded-lg shadow-md",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-800 dark:text-gray-100",children:"No Active Mentors"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-2",children:"You have no active mentorships. Find a mentor to get started!"}),e.jsx(p,{to:"/mentors",className:"mt-4 inline-block px-6 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition-colors",children:"Find a Mentor"})]})]})};export{k as default};
