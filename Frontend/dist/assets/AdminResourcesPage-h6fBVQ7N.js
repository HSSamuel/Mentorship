import{r as l,j as e,c as g,V as y}from"./index-kKR_KBkN.js";import{P as j}from"./plus-CuJYe4j9.js";import{S as N}from"./search-D05ddwCM.js";import{S as v}from"./square-pen-dQS2Ts3H.js";import{T as w}from"./trash-2-B9BHOJJO.js";const k=["ARTICLE","VIDEO","COURSE","BOOK","PODCAST","OTHER"],C=({isOpen:p,onClose:x,onSave:h,resource:i})=>{const[a,n]=l.useState({}),[c,o]=l.useState(!1);if(l.useEffect(()=>{n(i||{type:"ARTICLE",tags:[]})},[i]),!p)return null;const r=t=>{const{name:d,value:m}=t.target;n(s=>({...s,[d]:m}))},b=t=>{n(d=>({...d,tags:t.target.value.split(",")}))},u=async t=>{t.preventDefault(),o(!0);try{const d={...a,tags:Array.isArray(a.tags)?a.tags:a.tags.split(",").map(m=>m.trim()).filter(Boolean)};await h(d)}catch{}finally{o(!1)}};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex justify-center items-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-xl w-full max-w-2xl",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6",children:i?.id?"Edit Resource":"Add New Resource"}),e.jsxs("form",{onSubmit:u,className:"space-y-4",children:[e.jsx("input",{name:"title",value:a.title||"",onChange:r,placeholder:"Title",required:!0,className:"w-full p-2 border rounded-md dark:bg-gray-700"}),e.jsx("textarea",{name:"description",value:a.description||"",onChange:r,placeholder:"Description",required:!0,className:"w-full p-2 border rounded-md dark:bg-gray-700 h-24"}),e.jsx("input",{name:"link",type:"url",value:a.link||"",onChange:r,placeholder:"https://example.com",required:!0,className:"w-full p-2 border rounded-md dark:bg-gray-700"}),e.jsx("input",{name:"imageUrl",value:a.imageUrl||"",onChange:r,placeholder:"Image URL (Optional)",className:"w-full p-2 border rounded-md dark:bg-gray-700"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("select",{name:"type",value:a.type||"ARTICLE",onChange:r,className:"w-full p-2 border rounded-md dark:bg-gray-700",children:k.map(t=>e.jsx("option",{value:t,children:t},t))}),e.jsx("input",{name:"tags",value:a.tags?.join(", ")||"",onChange:b,placeholder:"Tags (comma-separated)",className:"w-full p-2 border rounded-md dark:bg-gray-700"})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-4",children:[e.jsx("button",{type:"button",onClick:x,disabled:c,className:"px-4 py-2 bg-gray-200 dark:bg-gray-600 rounded-md hover:bg-gray-300 disabled:opacity-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:c,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-blue-400",children:c?"Saving...":"Save Resource"})]})]})]})})},A=()=>{const[p,x]=l.useState([]),[h,i]=l.useState(!0),[a,n]=l.useState(!1),[c,o]=l.useState(null),[r,b]=l.useState(""),u=async()=>{i(!0);try{const s=await g.get("/resources");x(s.data)}catch{y.error("Failed to fetch resources.")}finally{i(!1)}};l.useEffect(()=>{u()},[]);const t=async s=>{const f=s.id?g.put(`/resources/${s.id}`,s):g.post("/resources",s);await y.promise(f,{loading:"Saving resource...",success:()=>(u(),n(!1),o(null),`Resource ${s.id?"updated":"created"} successfully!`),error:`Failed to ${s.id?"update":"create"} resource.`})},d=async s=>{window.confirm("Are you sure you want to delete this resource?")&&await y.promise(g.delete(`/resources/${s}`),{loading:"Deleting resource...",success:()=>(u(),"Resource deleted successfully!"),error:"Failed to delete resource."})},m=l.useMemo(()=>p.filter(s=>s.title.toLowerCase().includes(r.toLowerCase())||s.description.toLowerCase().includes(r.toLowerCase())),[p,r]);return e.jsxs("div",{className:"p-6 bg-gray-50 dark:bg-gray-900 min-h-screen",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:"Manage Resources"}),e.jsxs("button",{onClick:()=>{o(null),n(!0)},className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(j,{size:18})," Add New Resource"]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-md",children:[e.jsxs("div",{className:"relative mb-4",children:[e.jsx(N,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search resources by title or description...",value:r,onChange:s=>b(s.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-md dark:bg-gray-700"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3",children:"Title"}),e.jsx("th",{className:"px-6 py-3",children:"Type"}),e.jsx("th",{className:"px-6 py-3",children:"Link"}),e.jsx("th",{className:"px-6 py-3",children:"Actions"})]})}),e.jsx("tbody",{children:h?e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"text-center p-4",children:"Loading..."})}):m.map(s=>e.jsxs("tr",{className:"border-b dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600",children:[e.jsx("td",{className:"px-6 py-4 font-medium text-gray-900 dark:text-white",children:s.title}),e.jsx("td",{className:"px-6 py-4",children:s.type}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("a",{href:s.link,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline",children:"View"})}),e.jsxs("td",{className:"px-6 py-4 flex gap-4",children:[e.jsx("button",{onClick:()=>{o(s),n(!0)},className:"text-blue-500 hover:text-blue-700",children:e.jsx(v,{size:18})}),e.jsx("button",{onClick:()=>d(s.id),className:"text-red-500 hover:text-red-700",children:e.jsx(w,{size:18})})]})]},s.id))})]})})]}),e.jsx(C,{isOpen:a,onClose:()=>n(!1),onSave:t,resource:c})]})};export{A as default};
