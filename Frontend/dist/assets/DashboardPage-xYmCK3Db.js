import{u as Y,r as c,j as e,c as i,L as x}from"./index-kKR_KBkN.js";import{S as v,M as $}from"./StatCardSkeleton-D7Fd_rgu.js";const h=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M15 21a6 6 0 00-9-5.197m0 0A5.995 5.995 0 0112 13a5.995 5.995 0 01-3 5.197"})}),S=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 5.882V19.24a1.76 1.76 0 01-3.417.592l-2.147-6.15M18 13a3 3 0 100-6M5.433 13.646l2.147-6.15m0 0l-2.147 6.15m6.211 3.243l-2.147-6.15M12 5.882l2.147 6.15"})}),u=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),w=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})}),R=["The best mentorships are built on clear, regular communication. Don't be afraid to reach out!","Setting clear goals at the start of a mentorship can lead to a 70% higher success rate.","Remember to provide feedback after each session. It's the fastest way to improve.","Don't be afraid to ask questions! Every expert was once a beginner."],V=()=>{const{user:s,isLoading:g}=Y(),[t,E]=c.useState(null),[m,y]=c.useState(!0),[d,L]=c.useState(null),[C,D]=c.useState(""),[k,P]=c.useState([]);c.useEffect(()=>{(async()=>{if(console.log("DashboardPage: useEffect triggered."),console.log("Auth Loading:",g),console.log("User Object:",s),!(g||!s)){y(!0);try{let a,l,n;s.role==="ADMIN"?(n="/admin/stats",a=i.get(n)):s.role==="MENTOR"?(n=`/users/mentor/${s.id}/stats`,a=i.get(n),l=i.get("/sessions/mentor")):(n="/users/mentee/stats",a=i.get(n),l=i.get("/sessions/mentee")),console.log("Fetching stats from URL:",n);const p=await Promise.all([a,l].filter(Boolean)),j=p[0],T=p[1];if(E(j.data),T?.data?.length>0){const b=T.data.filter(f=>new Date(f.date)>new Date).sort((f,W)=>new Date(f.date).getTime()-new Date(W.date).getTime());b.length>0&&L(b[0])}if(s.role==="MENTEE"){const b=await i.get("/users/mentors/recommended");P(b.data)}}catch(a){console.error("Failed to fetch dashboard data:",a)}finally{y(!1)}}})(),D(R[Math.floor(Math.random()*R.length)])},[s,g]);const U=()=>{if(!s||!s.profile?.avatarUrl)return`https://ui-avatars.com/api/?name=${s?.profile?.name||s?.email||"User"}&background=random&color=fff`;const r=s.profile.avatarUrl;return r.startsWith("http")?r:`${i.defaults.baseURL}${r}`.replace("/api","")},o=({title:r,value:a,icon:l,linkTo:n,color:p,isHighlighted:j=!1})=>e.jsx("div",{className:`relative overflow-hidden rounded-xl p-6 shadow-lg transition-all duration-300 hover:scale-105 hover:shadow-2xl ${j?"ring-4 ring-yellow-400 dark:ring-yellow-500":""} bg-gradient-to-br from-gray-50 via-purple-50 to-blue-100 dark:from-gray-800 dark:via-purple-900/70 dark:to-blue-900/70`,children:e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsx("div",{className:`rounded-full p-4 shadow-md ${p}`,children:l}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:r}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:a}),n&&e.jsx(x,{to:n,className:"mt-1 inline-block text-sm font-semibold text-indigo-600 dark:text-indigo-400 hover:underline",children:"View details →"})]})]})}),q=()=>e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm rounded-xl shadow-lg p-8 my-8 text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Welcome to MentorMe!"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Let's get you started on your mentorship journey."}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-center gap-4",children:[e.jsx(x,{to:"/profile/edit",className:"px-6 py-2 bg-gradient-to-r from-blue-500 to-indigo-500 text-white rounded-lg font-semibold hover:from-blue-600 hover:to-indigo-600 transition-all",children:"Complete Your Profile"}),s?.role==="MENTOR"&&e.jsx(x,{to:"/availability",className:"px-6 py-2 bg-gradient-to-r from-green-500 to-blue-500 text-white rounded-lg font-semibold hover:from-green-600 hover:to-blue-600 transition-all",children:"Set Your Availability"}),s?.role==="MENTEE"&&e.jsx(x,{to:"/mentors",className:"px-6 py-2 bg-gradient-to-r from-green-500 to-blue-500 text-white rounded-lg font-semibold hover:from-green-600 hover:to-blue-600 transition-all",children:"Find a Mentor"})]})]}),A=()=>{const r=d.isGroupSession,a=r?"bg-gradient-to-r from-purple-500 to-yellow-500":"bg-gradient-to-r from-blue-600 to-purple-600",l=s?.role==="MENTOR"?d.mentee?.profile?.name:d.mentor?.profile?.name;return e.jsxs("div",{className:`${a} text-white rounded-xl shadow-lg p-8 my-8`,children:[e.jsx("h3",{className:"text-xl font-bold mb-2",children:"Next Upcoming Session"}),r?e.jsxs("p",{className:"text-lg",children:["Mentoring Circle: ",e.jsx("strong",{children:d.topic})]}):e.jsxs("p",{className:"text-lg",children:["With ",e.jsx("strong",{children:l||"your counterpart"})]}),e.jsx("p",{className:"text-2xl font-semibold my-2",children:new Date(d.date).toLocaleString([],{dateStyle:"full",timeStyle:"short"})}),e.jsx(x,{to:"/my-sessions",className:"mt-4 inline-block px-6 py-2 bg-white text-indigo-600 rounded-lg font-semibold hover:bg-gray-100",children:"View Session Details"})]})},I=()=>e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsx(o,{title:"Total Users",value:t.totalUsers,icon:e.jsx(h,{}),linkTo:"/admin/users",color:"bg-gradient-to-br from-blue-400 to-indigo-500"}),e.jsx(o,{title:"Total Mentors",value:t.totalMentors,icon:e.jsx(h,{}),linkTo:"/admin/users",color:"bg-gradient-to-br from-blue-400 to-indigo-500"}),e.jsx(o,{title:"Total Mentees",value:t.totalMentees,icon:e.jsx(h,{}),linkTo:"/admin/users",color:"bg-gradient-to-br from-blue-400 to-indigo-500"}),e.jsx(o,{title:"Total Matches",value:t.totalMatches,icon:e.jsx(S,{}),linkTo:"/admin/matches",color:"bg-gradient-to-br from-green-400 to-blue-500"}),e.jsx(o,{title:"Total Sessions",value:t.totalSessions,icon:e.jsx(u,{}),linkTo:"/admin/sessions",color:"bg-gradient-to-br from-purple-400 to-pink-500"}),e.jsx(o,{title:"Pending Requests",value:t.pendingRequests,icon:e.jsx(w,{}),linkTo:"/admin/matches",color:"bg-gradient-to-br from-yellow-400 to-orange-500",isHighlighted:t.pendingRequests>0})]}),H=()=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsx(o,{title:"Your Mentees",value:t.menteeCount,icon:e.jsx(h,{}),linkTo:"/my-sessions",color:"bg-gradient-to-br from-blue-400 to-indigo-500"}),e.jsx(o,{title:"Pending Requests",value:t.pendingRequests,icon:e.jsx(w,{}),linkTo:"/requests",color:"bg-gradient-to-br from-green-400 to-blue-500",isHighlighted:t.pendingRequests>0}),e.jsx(o,{title:"Upcoming Sessions",value:t.upcomingSessions,icon:e.jsx(u,{}),linkTo:"/my-sessions",color:"bg-gradient-to-br from-purple-400 to-pink-500"}),e.jsx(o,{title:"Completed Sessions",value:t.completedSessions,icon:e.jsx(u,{}),linkTo:"/my-sessions",color:"bg-gradient-to-br from-purple-400 to-pink-500"}),e.jsx(o,{title:"Average Rating",value:`${t.averageRating.toFixed(1)} ★`,icon:e.jsx(S,{}),color:"bg-gradient-to-br from-yellow-400 to-orange-500"})]}),e.jsxs("div",{className:"mt-8 bg-white/70 dark:bg-gray-800/50 backdrop-blur-sm rounded-xl p-6 shadow-lg",children:[e.jsx("h4",{className:"font-semibold text-gray-600 dark:text-gray-300",children:"Your Progress"}),e.jsxs("p",{className:"text-gray-800 dark:text-gray-100",children:["Level: ",e.jsx("strong",{children:s?.level?.name||"Beginner"})]}),e.jsxs("p",{className:"text-gray-800 dark:text-gray-100",children:["Points: ",e.jsx("strong",{children:s?.points||0})]})]})]}),O=()=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsx(o,{title:"Your Mentors",value:t.mentorCount,icon:e.jsx(h,{}),linkTo:"/my-mentors",color:"bg-gradient-to-br from-blue-400 to-indigo-500"}),e.jsx(o,{title:"Pending Requests",value:t.pendingRequests,icon:e.jsx(w,{}),linkTo:"/my-requests",color:"bg-gradient-to-br from-green-400 to-blue-500"}),e.jsx(o,{title:"Upcoming Sessions",value:t.upcomingSessions,icon:e.jsx(u,{}),linkTo:"/my-sessions",color:"bg-gradient-to-br from-purple-400 to-pink-500"}),e.jsx(o,{title:"Completed Sessions",value:t.completedSessions,icon:e.jsx(u,{}),linkTo:"/my-sessions",color:"bg-gradient-to-br from-purple-400 to-pink-500"})]}),e.jsxs("div",{className:"mt-8 bg-white/70 dark:bg-gray-800/50 backdrop-blur-sm rounded-xl p-6 shadow-lg",children:[e.jsx("h4",{className:"font-semibold text-gray-600 dark:text-gray-300",children:"Your Progress"}),e.jsxs("p",{className:"text-gray-800 dark:text-gray-100",children:["Level: ",e.jsx("strong",{children:s?.level?.name||"Beginner"})]}),e.jsxs("p",{className:"text-gray-800 dark:text-gray-100",children:["Points: ",e.jsx("strong",{children:s?.points||0})]})]}),k.length>0&&e.jsxs("div",{className:"mt-12",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100 mb-4",children:"Recommended Mentors for You"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:k.map(r=>e.jsx($,{mentor:r},r.id))})]})]}),N=()=>e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsx(v,{}),e.jsx(v,{}),e.jsx(v,{})]}),M=()=>e.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg relative",role:"alert",children:[e.jsx("strong",{className:"font-bold",children:"Error: "}),e.jsx("span",{className:"block sm:inline",children:"Could not load dashboard data. Please try again later."})]});return e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:g?N():s?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-blue-500 rounded-lg shadow-xl p-6 sm:p-8 mb-8 flex flex-col sm:flex-row items-center justify-between gap-6",children:[e.jsxs("div",{className:"text-center sm:text-left",children:[e.jsxs("h1",{className:"text-3xl font-bold text-white mb-2",children:["Welcome back,"," ",e.jsxs("span",{className:"text-yellow-300",children:[s.profile?.name||s.email.split("@")[0],"!"]})]}),s.role&&e.jsxs("span",{className:"inline-block bg-white/20 text-white text-xs font-semibold mr-2 px-2.5 py-0.5 rounded-full",children:["You are logged in as"," ",s.role.charAt(0).toUpperCase()+s.role.slice(1).toLowerCase()]}),e.jsx("p",{className:"text-indigo-100 mt-2",children:"Here's a summary of your activity on the platform."})]}),e.jsx("img",{src:U(),alt:"Profile",className:"h-24 w-24 rounded-full object-cover ring-4 ring-white/50 shadow-lg"})]}),m&&!t?N():null,!m&&!t&&!g?M():null,!m&&t&&(s.role==="MENTOR"&&t.menteeCount===0||s.role==="MENTEE"&&t.mentorCount===0)&&t.pendingRequests===0&&t.upcomingSessions===0&&e.jsx(q,{}),!m&&d&&e.jsx(A,{}),!m&&t&&e.jsxs("div",{className:"mt-8",children:[s.role==="ADMIN"&&I(),s.role==="MENTOR"&&H(),s.role==="MENTEE"&&O()]}),e.jsxs("div",{className:"mt-8 bg-white/70 dark:bg-gray-800/50 backdrop-blur-sm rounded-xl p-6 shadow-lg",children:[e.jsx("h4",{className:"font-semibold text-gray-600 dark:text-gray-300",children:"Mentor Tip of the Day"}),e.jsxs("p",{className:"text-gray-800 dark:text-gray-100 italic",children:['"',C,'"']})]})]}):M()})};export{V as default};
