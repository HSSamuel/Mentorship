import{j as e,r as s,c as y}from"./index-BOyHK8Ne.js";import{S as v,M as q}from"./StatCardSkeleton-Csw2ATtK.js";const I=({skills:m,selectedSkill:i,onSkillChange:p,searchQuery:w,onSearchChange:u,minExperience:d,onMinExperienceChange:j,language:g,onLanguageChange:k})=>e.jsx("aside",{className:"w-full md:w-64 lg:w-72 flex-shrink-0",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg sticky top-8",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Filters"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"search-filter",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Search by Name or Bio"}),e.jsx("input",{id:"search-filter",type:"text",placeholder:"e.g., John Doe",value:w,onChange:r=>u(r.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"skill-filter",className:"block text-sm font-medium text-gray-700 mb-1",children:"Filter by Skill"}),e.jsxs("select",{id:"skill-filter",value:i,onChange:r=>p(r.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",children:[e.jsx("option",{value:"",children:"All Skills"}),m.map(r=>e.jsx("option",{value:r,children:r},r))]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"experience-filter",className:"block text-sm font-medium text-gray-700 mb-1",children:"Minimum Years of Experience"}),e.jsx("input",{id:"experience-filter",type:"number",min:"0",value:d,onChange:r=>j(parseInt(r.target.value,10)),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"language-filter",className:"block text-sm font-medium text-gray-700 mb-1",children:"Language"}),e.jsx("input",{id:"language-filter",type:"text",placeholder:"e.g., English",value:g,onChange:r=>k(r.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]})]})]})}),Y=()=>{const[m,i]=s.useState([]),[p,w]=s.useState([]),[u,d]=s.useState([]),[j,g]=s.useState(!0),[k,r]=s.useState(new Set),[n,N]=s.useState(1),[x,S]=s.useState(1),[b,F]=s.useState(""),[c,E]=s.useState(""),[h,L]=s.useState(0),[f,P]=s.useState(""),[a,C]=s.useState("recommended"),M=s.useCallback(async()=>{g(!0);try{const[t,l]=await Promise.all([y.get("/users/skills"),y.get("/requests/sent")]);w(t.data);const R=new Set(l.data.map(o=>o.mentorId));if(r(R),a==="recommended"){const o=await y.get("/ai/matches");i(o.data),d(o.data),S(1),N(1)}else{const o=await y.get(`/users/mentors?page=${n}&limit=9`);i(o.data.mentors),d(o.data.mentors),S(o.data.totalPages)}}catch(t){console.error("Failed to fetch data:",t),i([]),d([])}finally{g(!1)}},[a,n]);return s.useEffect(()=>{M()},[M]),s.useEffect(()=>{if(a==="browse"){let t=m;b&&(t=t.filter(l=>l.profile.skills.includes(b))),c&&(t=t.filter(l=>l.profile.name.toLowerCase().includes(c.toLowerCase())||l.profile.bio.toLowerCase().includes(c.toLowerCase()))),h>0&&(t=t.filter(l=>l.profile.yearsOfExperience>=h)),f&&(t=t.filter(l=>l.profile.languages?.includes(f))),d(t)}},[b,c,h,f,m,a]),e.jsxs("div",{className:"flex flex-col md:flex-row gap-8",children:[a==="browse"&&e.jsx(I,{skills:p,selectedSkill:b,onSkillChange:F,searchQuery:c,onSearchChange:E,minExperience:h,onMinExperienceChange:L,language:f,onLanguageChange:P}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-center mb-6 border-b border-gray-200",children:[e.jsx("button",{onClick:()=>C("recommended"),className:`px-4 py-2 text-sm font-semibold transition-colors duration-200 ${a==="recommended"?"border-b-2 border-blue-600 text-blue-600":"text-gray-500 hover:text-blue-500"}`,children:"✨ Recommended For You"}),e.jsx("button",{onClick:()=>C("browse"),className:`px-4 py-2 text-sm font-semibold transition-colors duration-200 ${a==="browse"?"border-b-2 border-blue-600 text-blue-600":"text-gray-500 hover:text-blue-500"}`,children:"🔍 Browse All Mentors"})]}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-6 text-center",children:a==="recommended"?"Top Mentor Matches":"Find Your Mentor"}),j?e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:[e.jsx(v,{}),e.jsx(v,{}),e.jsx(v,{})]}):u.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:u.map(t=>e.jsx(q,{mentor:t,isAlreadyRequested:k.has(t.id)},t.id))}),a==="browse"&&x>1&&e.jsxs("div",{className:"flex justify-center items-center mt-8 gap-4",children:[e.jsx("button",{onClick:()=>N(t=>Math.max(t-1,1)),disabled:n===1,className:"px-4 py-2 bg-white border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50",children:"Previous"}),e.jsxs("span",{className:"text-sm text-gray-700",children:["Page ",n," of ",x]}),e.jsx("button",{onClick:()=>N(t=>Math.min(t+1,x)),disabled:n===x,className:"px-4 py-2 bg-white border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50",children:"Next"})]})]}):e.jsxs("div",{className:"text-center py-16 px-6 bg-white rounded-lg shadow-md",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:"No Mentors Found"}),e.jsx("p",{className:"text-gray-500 mt-2",children:a==="recommended"?"Update your profile skills and goals for better matches.":"Try adjusting your filters or check back later."})]})]})]})};export{Y as default};
