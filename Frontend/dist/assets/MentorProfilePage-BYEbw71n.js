import{f as D,u as I,r as l,j as e,L as v,c as u,V as w}from"./index-DpNFJqVI.js";import{A as z,U as O}from"./user-Dz8KJV_s.js";import{S as V}from"./square-pen-ab8tmZQE.js";import{M as _}from"./message-square-a6kRtO1E.js";import{c as B}from"./createLucideIcon-C_DQYBsD.js";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=[["path",{d:"M16 19h6",key:"xwg31i"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M19 16v6",key:"tddt3s"}],["path",{d:"M21 12.598V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h8.5",key:"1glfrc"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 2v4",key:"1cmpym"}]],G=B("calendar-plus",F),H=r=>{if(!r)return"N/A";const s=new Date(r),i=Math.round((new Date().getTime()-s.getTime())/(1e3*60)),n=Math.round(i/60),d=Math.round(n/24);return i<1?"Online":i<60?`Last seen ${i} minute${i===1?"":"s"} ago`:n<24?`Last seen ${n} hour${n===1?"":"s"} ago`:d===1?"Last seen yesterday":d<7?`Last seen ${d} day${d===1?"":"s"} ago`:`Last seen ${s.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}`},W=()=>e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),k=({rating:r,totalReviews:s})=>{const t=Math.round(r);return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex",children:[...Array(5)].map((i,n)=>e.jsx("svg",{className:`w-5 h-5 ${n<t?"text-yellow-400":"text-gray-300"}`,fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},n))}),s>0&&e.jsxs("span",{className:"text-gray-600 dark:text-gray-400 text-sm",children:["(",s," reviews)"]})]})},Z=()=>{const{id:r}=D(),{user:s}=I(),[t,i]=l.useState(null),[n,d]=l.useState([]),[R,E]=l.useState(0),[M,f]=l.useState(!0),[p,S]=l.useState(""),[h,x]=l.useState(!1),[y,b]=l.useState(!1),[j,N]=l.useState(""),[q,m]=l.useState(null),L=async()=>{if(s&&s.role==="MENTEE"&&r)try{const a=await u.get(`/requests/status/${r}`);a.data.exists?(x(!0),m(a.data.status)):(x(!1),m(null))}catch(a){console.warn("Could not check mentorship request status:",a)}else s&&s.role!=="MENTEE"&&(x(!0),m("N/A"))};l.useEffect(()=>{(async()=>{if(r){f(!0);try{const[o,g]=await Promise.all([u.get(`/users/${r}`),u.get(`/reviews/mentor/${r}`)]);if(i(o.data),o.data.role==="MENTOR"&&(d(g.data),g.data.length>0)){const P=g.data.reduce((U,C)=>U+C.rating,0);E(P/g.data.length)}s&&await L()}catch(o){S("User profile not found or an error occurred."),console.error(o)}finally{f(!1)}}})()},[r,s]);const $=async()=>{N(""),b(!0);try{await u.post("/requests",{mentorId:t.id}),x(!0),m("PENDING"),w.success("Mentorship request sent successfully!")}catch(a){const o=a.response?.status===409?"You have already sent a request to this mentor.":"Failed to send request. Please try again.";N(o),w.error(o)}finally{b(!1)}};if(M)return e.jsx("p",{className:"text-center text-gray-500 mt-10",children:"Loading user profile..."});if(p)return e.jsx("p",{className:"text-center text-red-500 mt-10",children:p});if(!t)return e.jsx("p",{className:"text-center text-gray-500 mt-10",children:"This user could not be found."});const T=()=>t.profile?.avatarUrl?t.profile.avatarUrl.startsWith("http")?t.profile.avatarUrl:`${u.defaults.baseURL}${t.profile.avatarUrl}`.replace("/api",""):`https://ui-avatars.com/api/?name=${encodeURIComponent(t.profile.name)}&background=random&color=fff&size=128`;let c="Request Mentorship";if(h)switch(q){case"PENDING":c="Request Pending...";break;case"ACCEPTED":c="Mentorship Accepted!";break;case"REJECTED":c="Request Rejected";break;case"CANCELLED":c="Request Cancelled";break;default:c="Request Sent âœ“"}const A=y?e.jsx(W,{}):c;return e.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 min-h-screen p-4 sm:p-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl overflow-hidden",children:[e.jsx("div",{className:"h-48 bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 relative",children:e.jsx("img",{src:T(),alt:`Avatar of ${t.profile.name}`,className:"w-32 h-32 rounded-full object-cover border-4 border-white dark:border-gray-800 absolute bottom-0 left-1/2 -translate-x-1/2 translate-y-1/2 shadow-lg"})}),e.jsxs("div",{className:"pt-20 pb-8 px-8 text-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:t.profile.name}),e.jsxs("span",{className:`mt-2 inline-flex items-center px-3 py-1 rounded-full text-sm font-semibold ${t.role==="MENTOR"?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300":"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300"}`,children:[t.role==="MENTOR"?e.jsx(z,{size:16,className:"mr-1.5"}):e.jsx(O,{size:16,className:"mr-1.5"}),t.role]}),t.role==="MENTOR"&&n.length>0&&e.jsx("div",{className:"mt-3 flex justify-center",children:e.jsx(k,{rating:R,totalReviews:n.length})}),t.lastSeen&&e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mt-2",children:H(t.lastSeen)})]}),e.jsxs("div",{className:"border-t dark:border-gray-700 px-8 py-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200 mb-2",children:"About Me"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:t.profile.bio})]}),t.profile.skills&&t.profile.skills.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200 mb-3",children:"Skills & Expertise"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:t.profile.skills.map(a=>e.jsx("span",{className:"px-3 py-1 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-full text-sm font-medium",children:a},a))})]})]}),e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700/50 px-8 py-4 flex flex-col sm:flex-row justify-center items-center gap-4",children:s&&s.id===r?e.jsxs(v,{to:"/profile/edit",className:"w-full sm:w-auto flex items-center justify-center gap-2 px-6 py-3 bg-indigo-600 text-white rounded-lg font-semibold hover:bg-indigo-700 shadow-md transition-all",children:[e.jsx(V,{size:20})," Edit My Profile"]}):s&&s.role==="MENTEE"&&t.role==="MENTOR"?e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:$,disabled:h||y,className:`w-full sm:w-auto flex items-center justify-center gap-2 px-6 py-3 text-white rounded-lg font-semibold transition-all ${h?"bg-gray-500 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-700 shadow-md"}`,children:[e.jsx(_,{size:20})," ",A]}),e.jsxs(v,{to:`/book-session/${r}`,className:"w-full sm:w-auto flex items-center justify-center gap-2 px-6 py-3 bg-green-600 text-white rounded-lg font-semibold hover:bg-green-700 shadow-md transition-all",children:[e.jsx(G,{size:20})," Book a Session"]})]}):null}),j&&e.jsx("p",{className:"text-red-500 text-sm text-center py-2",children:j})]}),t.role==="MENTOR"&&e.jsxs("div",{className:"mt-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"What Mentees Are Saying"}),n.length>0?e.jsx("div",{className:"space-y-6",children:n.map(a=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(k,{rating:a.rating,totalReviews:0}),e.jsx("p",{className:"ml-4 font-bold text-gray-800 dark:text-gray-200",children:a.mentorshipRequest.mentee.profile.name})]}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 italic",children:['"',a.comment,'"']})]},a.id))}):e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"This mentor doesn't have any reviews yet."})]})]})})};export{Z as default};
