import{r as s,j as e,V as y,c as f,L as G}from"./index-C_tbM6aH.js";const F=()=>e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),A=({isOpen:n,onClose:c,onSave:o,goal:r})=>{const[h,x]=s.useState(""),[l,u]=s.useState(""),[d,g]=s.useState(""),[v,j]=s.useState(""),[N,t]=s.useState(""),[a,m]=s.useState(""),[w,k]=s.useState(""),[S,C]=s.useState(!1);if(s.useEffect(()=>{r?(x(r.title),u(r.description||""),g(r.specific||""),j(r.measurable||""),t(r.achievable||""),m(r.relevant||""),k(r.timeBound||"")):(x(""),u(""),g(""),j(""),t(""),m(""),k(""))},[r,n]),!n)return null;const M=async i=>{if(i.preventDefault(),!h||!d||!v||!N||!a||!w){y.error("Please fill out the Title and all S.M.A.R.T. goal fields.");return}C(!0);try{await o({title:h,description:l,specific:d,measurable:v,achievable:N,relevant:a,timeBound:w})}catch{}finally{C(!1)}},p="mt-1 block w-full px-3 py-1.5 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-gray-200 focus:ring-blue-500 focus:border-blue-500 sm:text-sm",b="block text-sm font-medium text-gray-700 dark:text-gray-300";return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-2xl w-full max-w-md max-h-[90vh] overflow-y-auto",children:[e.jsx("h3",{className:"text-xl font-bold text-center text-gray-800 dark:text-gray-100 mb-4",children:r?"Edit Goal":"Add New Goal"}),e.jsxs("form",{onSubmit:M,className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"title",className:b,children:"Goal Title"}),e.jsx("input",{type:"text",id:"title",value:h,onChange:i=>x(i.target.value),required:!0,className:p})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"description",className:b,children:"Description (Optional)"}),e.jsx("textarea",{id:"description",value:l,onChange:i=>u(i.target.value),className:p,rows:2})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"specific",className:b,children:"Specific"}),e.jsx("input",{type:"text",id:"specific",value:d,onChange:i=>g(i.target.value),required:!0,className:p,placeholder:"What exactly do I want to accomplish?"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"measurable",className:b,children:"Measurable"}),e.jsx("input",{type:"text",id:"measurable",value:v,onChange:i=>j(i.target.value),required:!0,className:p,placeholder:"How will I track my progress?"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"achievable",className:b,children:"Achievable"}),e.jsx("input",{type:"text",id:"achievable",value:N,onChange:i=>t(i.target.value),required:!0,className:p,placeholder:"Is this goal realistic?"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"relevant",className:b,children:"Relevant"}),e.jsx("input",{type:"text",id:"relevant",value:a,onChange:i=>m(i.target.value),required:!0,className:p,placeholder:"Why is this goal important to me?"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"timeBound",className:b,children:"Time-bound"}),e.jsx("input",{type:"text",id:"timeBound",value:w,onChange:i=>k(i.target.value),required:!0,className:p,placeholder:"What is the deadline?"})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-2",children:[e.jsx("button",{type:"button",onClick:c,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:S,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition-colors disabled:bg-blue-400 disabled:cursor-not-allowed flex items-center justify-center w-28",children:S?e.jsx(F,{}):r?"Save":"Add Goal"})]})]})]})})},E=({mentorshipId:n})=>{const[c,o]=s.useState([]),[r,h]=s.useState(!0),[x,l]=s.useState(!1),[u,d]=s.useState(null),g=async()=>{h(!0);try{const t=await f.get(`/goals/${n}`);o(t.data)}catch(t){console.error("Failed to fetch goals:",t)}finally{h(!1)}};s.useEffect(()=>{n&&g()},[n]);const v=async t=>{try{if(u){const{data:a}=await f.put(`/goals/${u.id}`,t);o(c.map(m=>m.id===a.id?a:m)),y.success("Goal updated!")}else{const{data:a}=await f.post("/goals",{...t,mentorshipRequestId:n});o([...c,a]),y.success("Goal added!")}l(!1),d(null)}catch(a){console.error("Failed to save goal:",a),y.error("Failed to save goal.")}},j=async t=>{try{const{data:a}=await f.put(`/goals/${t.id}`,{isCompleted:!t.isCompleted});o(c.map(m=>m.id===a.id?a:m))}catch(a){console.error("Failed to update goal status:",a)}},N=async t=>{if(window.confirm("Are you sure you want to delete this goal?"))try{await f.delete(`/goals/${t}`),o(c.filter(a=>a.id!==t)),y.success("Goal deleted.")}catch(a){console.error("Failed to delete goal:",a),y.error("Failed to delete goal.")}};return r?e.jsx("p",{className:"text-gray-500",children:"Loading goals..."}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-700 dark:text-gray-200",children:"Our Goals"}),e.jsx("button",{onClick:()=>{d(null),l(!0)},className:"px-4 py-2 text-sm font-medium text-white bg-green-600 rounded-lg hover:bg-green-700 transition-colors",children:"+ Add New Goal"})]}),e.jsx("div",{className:"space-y-3",children:c.length>0?c.map(t=>e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:t.isCompleted,onChange:()=>j(t),className:"h-5 w-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("p",{className:`ml-4 ${t.isCompleted?"line-through text-gray-400":"text-gray-800 dark:text-gray-100"}`,children:t.title})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>{d(t),l(!0)},className:"text-sm text-blue-500 hover:underline",children:"Edit"}),e.jsx("button",{onClick:()=>N(t.id),className:"text-sm text-red-500 hover:underline",children:"Delete"})]})]},t.id)):e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center py-4",children:"No goals set yet. Add one to get started!"})}),x&&e.jsx(A,{isOpen:x,onClose:()=>{l(!1),d(null)},onSave:v,goal:u})]})},T=()=>{const[n,c]=s.useState([]),[o,r]=s.useState(null),[h,x]=s.useState(!0);return s.useEffect(()=>{(async()=>{x(!0);try{const d=(await f.get("/requests/sent")).data.filter(g=>g.status==="ACCEPTED");c(d),d.length>0&&r(d[0])}catch(u){console.error("Failed to fetch matches:",u)}finally{x(!1)}})()},[]),h?e.jsx("p",{className:"text-center text-gray-500",children:"Loading your mentors..."}):e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-center text-gray-900 dark:text-white mb-8",children:"My Mentors"}),n.length>0?e.jsxs("div",{className:"flex flex-col md:flex-row gap-8",children:[e.jsx("aside",{className:"w-full md:w-1/3 lg:w-1/4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden",children:e.jsx("ul",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:n.map(l=>e.jsx("li",{children:e.jsxs("button",{onClick:()=>r(l),className:`w-full text-left p-4 transition-all duration-200 ${o?.id===l.id?"bg-gradient-to-r from-purple-100 to-blue-100 dark:from-purple-900/50 dark:to-blue-900/50":"hover:bg-gray-50 dark:hover:bg-gray-700/50"}`,children:[e.jsx("p",{className:`font-semibold ${o?.id===l.id?"text-purple-700 dark:text-purple-300":"text-gray-800 dark:text-gray-200"}`,children:l.mentor.profile.name}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Matched on"," ",new Date(l.updatedAt).toLocaleDateString()]})]})},l.id))})})}),e.jsx("main",{className:"flex-1",children:o?e.jsxs("div",{className:"rounded-xl shadow-2xl p-6 bg-gradient-to-br from-purple-100 via-blue-100 to-cyan-100 dark:from-purple-900/70 dark:via-blue-900/70 dark:to-cyan-900/70",children:[e.jsxs("div",{className:"flex justify-between items-center pb-4 border-b border-gray-300 dark:border-gray-600 mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:o.mentor.profile.name}),e.jsx(G,{to:`/book-session/${o.mentor.id}`,className:"px-5 py-2.5 text-sm font-medium text-white bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg shadow-md hover:from-blue-600 hover:to-purple-700 transition-all duration-300",children:"Book a Session"})]}),e.jsx("div",{className:"bg-white/50 dark:bg-gray-800/50 p-6 rounded-lg",children:e.jsx(E,{mentorshipId:o.id})})]}):e.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400",children:"Select a mentor to see details."})})]}):e.jsxs("div",{className:"text-center py-16 px-6 bg-white dark:bg-gray-800 rounded-lg shadow-md",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-800 dark:text-gray-100",children:"No Active Mentors"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-2",children:"You have no active mentorships. Find a mentor to get started!"}),e.jsx(G,{to:"/mentors",className:"mt-4 inline-block px-6 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition-colors",children:"Find a Mentor"})]})]})};export{T as default};
