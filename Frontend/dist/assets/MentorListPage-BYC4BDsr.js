import{j as e,r as a,c as j}from"./index-D8cSyDI9.js";import{M as P}from"./MentorCard-Dp-4BTf2.js";const q=({skills:i,selectedSkill:x,onSkillChange:h,searchQuery:b,onSearchChange:n,minExperience:d,onMinExperienceChange:f,language:c,onLanguageChange:y})=>e.jsx("aside",{className:"w-full md:w-64 lg:w-72 flex-shrink-0",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg sticky top-8",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Filters"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"search-filter",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Search by Name or Bio"}),e.jsx("input",{id:"search-filter",type:"text",placeholder:"e.g., John Doe",value:b,onChange:r=>n(r.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"skill-filter",className:"block text-sm font-medium text-gray-700 mb-1",children:"Filter by Skill"}),e.jsxs("select",{id:"skill-filter",value:x,onChange:r=>h(r.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",children:[e.jsx("option",{value:"",children:"All Skills"}),i.map(r=>e.jsx("option",{value:r,children:r},r))]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"experience-filter",className:"block text-sm font-medium text-gray-700 mb-1",children:"Minimum Years of Experience"}),e.jsx("input",{id:"experience-filter",type:"number",min:"0",value:d,onChange:r=>f(parseInt(r.target.value,10)),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"language-filter",className:"block text-sm font-medium text-gray-700 mb-1",children:"Language"}),e.jsx("input",{id:"language-filter",type:"text",placeholder:"e.g., English",value:c,onChange:r=>y(r.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]})]})]})}),A=()=>{const[i,x]=a.useState([]),[h,b]=a.useState([]),[n,d]=a.useState([]),[f,c]=a.useState(!0),[y,r]=a.useState(new Set),[l,k]=a.useState(1),[p,w]=a.useState(1),[g,N]=a.useState(""),[o,S]=a.useState(""),[u,v]=a.useState(0),[m,C]=a.useState("");return a.useEffect(()=>{(async()=>{c(!0);try{const[s,M,F]=await Promise.all([j.get(`/users/mentors?page=${l}&limit=9`),j.get("/users/skills"),j.get("/requests/sent")]);x(s.data.mentors),d(s.data.mentors),w(s.data.totalPages),b(M.data);const L=new Set(F.data.map(E=>E.mentorId));r(L)}catch(s){console.error("Failed to fetch data:",s)}finally{c(!1)}})()},[l]),a.useEffect(()=>{let t=i;g&&(t=t.filter(s=>s.profile.skills.includes(g))),o&&(t=t.filter(s=>s.profile.name.toLowerCase().includes(o.toLowerCase())||s.profile.bio.toLowerCase().includes(o.toLowerCase()))),u>0&&(t=t.filter(s=>s.profile.yearsOfExperience>=u)),m&&(t=t.filter(s=>s.profile.languages?.includes(m))),d(t)},[g,o,i,u,m]),e.jsxs("div",{className:"flex flex-col md:flex-row gap-8",children:[e.jsx(q,{skills:h,selectedSkill:g,onSkillChange:N,searchQuery:o,onSearchChange:S,minExperience:u,onMinExperienceChange:v,language:m,onLanguageChange:C}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-6 text-center",children:"Find Your Mentor"}),f?e.jsx("p",{className:"text-gray-500",children:"Loading mentors..."}):n.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:n.map(t=>e.jsx(P,{mentor:t,isAlreadyRequested:y.has(t.id)},t.id))}),e.jsxs("div",{className:"flex justify-center items-center mt-8 gap-4",children:[e.jsx("button",{onClick:()=>k(t=>Math.max(t-1,1)),disabled:l===1,className:"px-4 py-2 bg-white border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50",children:"Previous"}),e.jsxs("span",{className:"text-sm text-gray-700",children:["Page ",l," of ",p]}),e.jsx("button",{onClick:()=>k(t=>Math.min(t+1,p)),disabled:l===p,className:"px-4 py-2 bg-white border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50",children:"Next"})]})]}):e.jsxs("div",{className:"text-center py-16 px-6 bg-white rounded-lg shadow-md",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:"No Mentors Found"}),e.jsx("p",{className:"text-gray-500 mt-2",children:"Try adjusting your filters or check back later."})]})]})]})};export{A as default};
