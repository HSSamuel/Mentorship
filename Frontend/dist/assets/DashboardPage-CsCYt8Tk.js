import{u as B,r as i,j as e,c as l,L as m}from"./index-DpNFJqVI.js";import{S as v,M as F}from"./StatCardSkeleton-Dwh3Hm9i.js";const x=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M15 21a6 6 0 00-9-5.197m0 0A5.995 5.995 0 0112 13a5.995 5.995 0 01-3 5.197"})}),S=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 5.882V19.24a1.76 1.76 0 01-3.417.592l-2.147-6.15M18 13a3 3 0 100-6M5.433 13.646l2.147-6.15m0 0l-2.147 6.15m6.211 3.243l-2.147-6.15M12 5.882l2.147 6.15"})}),h=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),w=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})}),R=["The best mentorships are built on clear, regular communication. Don't be afraid to reach out!","Setting clear goals at the start of a mentorship can lead to a 70% higher success rate.","Remember to provide feedback after each session. It's the fastest way to improve.","Don't be afraid to ask questions! Every expert was once a beginner."],$=()=>{const{user:s,isLoading:d}=B(),[t,L]=i.useState(null),[c,y]=i.useState(!0),[u,D]=i.useState(null),[E,C]=i.useState(""),[k,P]=i.useState([]);i.useEffect(()=>{(async()=>{if(console.log("DashboardPage: useEffect triggered."),console.log("Auth Loading:",d),console.log("User Object:",s),!(d||!s)){y(!0);try{let n,g,r;s.role==="ADMIN"?(r="/admin/stats",n=l.get(r)):s.role==="MENTOR"?(r=`/users/mentor/${s.id}/stats`,n=l.get(r),g=l.get("/sessions/mentor")):(r="/users/mentee/stats",n=l.get(r),g=l.get("/sessions/mentee")),console.log("Fetching stats from URL:",r);const p=await Promise.all([n,g].filter(Boolean)),f=p[0],T=p[1];if(L(f.data),T?.data?.length>0){const b=T.data.filter(j=>new Date(j.date)>new Date).sort((j,Y)=>new Date(j.date).getTime()-new Date(Y.date).getTime());b.length>0&&D(b[0])}if(s.role==="MENTEE"){const b=await l.get("/users/mentors/recommended");P(b.data)}}catch(n){console.error("Failed to fetch dashboard data:",n)}finally{y(!1)}}})(),C(R[Math.floor(Math.random()*R.length)])},[s,d]);const U=()=>{if(!s||!s.profile?.avatarUrl)return`https://ui-avatars.com/api/?name=${s?.profile?.name||s?.email||"User"}&background=random&color=fff`;const a=s.profile.avatarUrl;return a.startsWith("http")?a:`${l.defaults.baseURL}${a}`.replace("/api","")},o=({title:a,value:n,icon:g,linkTo:r,color:p,isHighlighted:f=!1})=>e.jsx("div",{className:`relative overflow-hidden rounded-xl p-6 shadow-lg transition-all duration-300 hover:scale-105 hover:shadow-2xl ${f?"ring-4 ring-yellow-400 dark:ring-yellow-500":""} bg-gradient-to-br from-gray-50 via-purple-50 to-blue-100 dark:from-gray-800 dark:via-purple-900/70 dark:to-blue-900/70`,children:e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsx("div",{className:`rounded-full p-4 shadow-md ${p}`,children:g}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:a}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:n}),r&&e.jsx(m,{to:r,className:"mt-1 inline-block text-sm font-semibold text-indigo-600 dark:text-indigo-400 hover:underline",children:"View details →"})]})]})}),q=()=>e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm rounded-xl shadow-lg p-8 my-8 text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Welcome to MentorMe!"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Let's get you started on your mentorship journey."}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-center gap-4",children:[e.jsx(m,{to:"/profile/edit",className:"px-6 py-2 bg-gradient-to-r from-blue-500 to-indigo-500 text-white rounded-lg font-semibold hover:from-blue-600 hover:to-indigo-600 transition-all",children:"Complete Your Profile"}),s?.role==="MENTOR"&&e.jsx(m,{to:"/availability",className:"px-6 py-2 bg-gradient-to-r from-green-500 to-blue-500 text-white rounded-lg font-semibold hover:from-green-600 hover:to-blue-600 transition-all",children:"Set Your Availability"}),s?.role==="MENTEE"&&e.jsx(m,{to:"/mentors",className:"px-6 py-2 bg-gradient-to-r from-green-500 to-blue-500 text-white rounded-lg font-semibold hover:from-green-600 hover:to-blue-600 transition-all",children:"Find a Mentor"})]})]}),A=()=>e.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-indigo-600 text-white rounded-xl shadow-lg p-8 my-8",children:[e.jsx("h3",{className:"text-xl font-bold mb-2",children:"Next Upcoming Session"}),e.jsxs("p",{className:"text-lg",children:["With"," ",s?.role==="MENTOR"?u.mentee.profile.name:u.mentor.profile.name]}),e.jsx("p",{className:"text-2xl font-semibold my-2",children:new Date(u.date).toLocaleString([],{dateStyle:"full",timeStyle:"short"})}),e.jsx(m,{to:"/my-sessions",className:"mt-4 inline-block px-6 py-2 bg-white text-indigo-600 rounded-lg font-semibold hover:bg-gray-100",children:"View Session Details"})]}),I=()=>e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsx(o,{title:"Total Users",value:t.totalUsers,icon:e.jsx(x,{}),linkTo:"/admin/users",color:"bg-gradient-to-br from-blue-400 to-indigo-500"}),e.jsx(o,{title:"Total Mentors",value:t.totalMentors,icon:e.jsx(x,{}),linkTo:"/admin/users",color:"bg-gradient-to-br from-blue-400 to-indigo-500"}),e.jsx(o,{title:"Total Mentees",value:t.totalMentees,icon:e.jsx(x,{}),linkTo:"/admin/users",color:"bg-gradient-to-br from-blue-400 to-indigo-500"}),e.jsx(o,{title:"Total Matches",value:t.totalMatches,icon:e.jsx(S,{}),linkTo:"/admin/matches",color:"bg-gradient-to-br from-green-400 to-blue-500"}),e.jsx(o,{title:"Total Sessions",value:t.totalSessions,icon:e.jsx(h,{}),linkTo:"/admin/sessions",color:"bg-gradient-to-br from-purple-400 to-pink-500"}),e.jsx(o,{title:"Pending Requests",value:t.pendingRequests,icon:e.jsx(w,{}),linkTo:"/admin/matches",color:"bg-gradient-to-br from-yellow-400 to-orange-500",isHighlighted:t.pendingRequests>0})]}),H=()=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsx(o,{title:"Your Mentees",value:t.menteeCount,icon:e.jsx(x,{}),linkTo:"/my-sessions",color:"bg-gradient-to-br from-blue-400 to-indigo-500"}),e.jsx(o,{title:"Pending Requests",value:t.pendingRequests,icon:e.jsx(w,{}),linkTo:"/requests",color:"bg-gradient-to-br from-green-400 to-blue-500",isHighlighted:t.pendingRequests>0}),e.jsx(o,{title:"Upcoming Sessions",value:t.upcomingSessions,icon:e.jsx(h,{}),linkTo:"/my-sessions",color:"bg-gradient-to-br from-purple-400 to-pink-500"}),e.jsx(o,{title:"Completed Sessions",value:t.completedSessions,icon:e.jsx(h,{}),linkTo:"/my-sessions",color:"bg-gradient-to-br from-purple-400 to-pink-500"}),e.jsx(o,{title:"Average Rating",value:`${t.averageRating.toFixed(1)} ★`,icon:e.jsx(S,{}),color:"bg-gradient-to-br from-yellow-400 to-orange-500"})]}),e.jsxs("div",{className:"mt-8 bg-white/70 dark:bg-gray-800/50 backdrop-blur-sm rounded-xl p-6 shadow-lg",children:[e.jsx("h4",{className:"font-semibold text-gray-600 dark:text-gray-300",children:"Your Progress"}),e.jsxs("p",{className:"text-gray-800 dark:text-gray-100",children:["Level: ",e.jsx("strong",{children:s?.level?.name||"Beginner"})]}),e.jsxs("p",{className:"text-gray-800 dark:text-gray-100",children:["Points: ",e.jsx("strong",{children:s?.points||0})]})]})]}),W=()=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsx(o,{title:"Your Mentors",value:t.mentorCount,icon:e.jsx(x,{}),linkTo:"/my-mentors",color:"bg-gradient-to-br from-blue-400 to-indigo-500"}),e.jsx(o,{title:"Pending Requests",value:t.pendingRequests,icon:e.jsx(w,{}),linkTo:"/my-requests",color:"bg-gradient-to-br from-green-400 to-blue-500"}),e.jsx(o,{title:"Upcoming Sessions",value:t.upcomingSessions,icon:e.jsx(h,{}),linkTo:"/my-sessions",color:"bg-gradient-to-br from-purple-400 to-pink-500"}),e.jsx(o,{title:"Completed Sessions",value:t.completedSessions,icon:e.jsx(h,{}),linkTo:"/my-sessions",color:"bg-gradient-to-br from-purple-400 to-pink-500"})]}),e.jsxs("div",{className:"mt-8 bg-white/70 dark:bg-gray-800/50 backdrop-blur-sm rounded-xl p-6 shadow-lg",children:[e.jsx("h4",{className:"font-semibold text-gray-600 dark:text-gray-300",children:"Your Progress"}),e.jsxs("p",{className:"text-gray-800 dark:text-gray-100",children:["Level: ",e.jsx("strong",{children:s?.level?.name||"Beginner"})]}),e.jsxs("p",{className:"text-gray-800 dark:text-gray-100",children:["Points: ",e.jsx("strong",{children:s?.points||0})]})]}),k.length>0&&e.jsxs("div",{className:"mt-12",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100 mb-4",children:"Recommended Mentors for You"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:k.map(a=>e.jsx(F,{mentor:a},a.id))})]})]}),N=()=>e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsx(v,{}),e.jsx(v,{}),e.jsx(v,{})]}),M=()=>e.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg relative",role:"alert",children:[e.jsx("strong",{className:"font-bold",children:"Error: "}),e.jsx("span",{className:"block sm:inline",children:"Could not load dashboard data. Please try again later."})]});return e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:d?N():s?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-gradient-to-tr from-indigo-500 via-purple-500 to-pink-500 rounded-lg shadow-xl p-6 sm:p-8 mb-8 flex flex-col sm:flex-row items-center justify-between gap-6",children:[e.jsxs("div",{className:"text-center sm:text-left",children:[e.jsxs("h1",{className:"text-3xl font-bold text-white mb-2",children:["Welcome back,"," ",e.jsxs("span",{className:"text-yellow-300",children:[s.profile?.name||s.email.split("@")[0],"!"]})]}),s.role&&e.jsxs("span",{className:"inline-block bg-white/20 text-white text-xs font-semibold mr-2 px-2.5 py-0.5 rounded-full",children:["You are logged in as"," ",s.role.charAt(0).toUpperCase()+s.role.slice(1).toLowerCase()]}),e.jsx("p",{className:"text-indigo-100 mt-2",children:"Here's a summary of your activity on the platform."})]}),e.jsx("img",{src:U(),alt:"Profile",className:"h-24 w-24 rounded-full object-cover ring-4 ring-white/50 shadow-lg"})]}),c&&!t?N():null,!c&&!t&&!d?M():null,!c&&t&&t.menteeCount===0&&t.pendingRequests===0&&t.upcomingSessions===0&&e.jsx(q,{}),!c&&u&&e.jsx(A,{}),!c&&t&&e.jsxs("div",{className:"mt-8",children:[s.role==="ADMIN"&&I(),s.role==="MENTOR"&&H(),s.role==="MENTEE"&&W()]}),e.jsxs("div",{className:"mt-8 bg-white/70 dark:bg-gray-800/50 backdrop-blur-sm rounded-xl p-6 shadow-lg",children:[e.jsx("h4",{className:"font-semibold text-gray-600 dark:text-gray-300",children:"Mentor Tip of the Day"}),e.jsxs("p",{className:"text-gray-800 dark:text-gray-100 italic",children:['"',E,'"']})]})]}):M()})};export{$ as default};
